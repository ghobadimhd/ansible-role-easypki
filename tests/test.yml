---
- hosts: localhost
  roles:
    - role: easypki
      easypki_chains: 
        - name: OpenVPN
          root_dir: "{{ playbook_dir }}/pkis"
          ca:
            name: ca
          servers:
            - name: openvpn
              cn: OpenVPN
              not_after: "+365d"
              alt_names:
                domains: 
                  - ovpn.example.com
                ips:
                  - "{{ ansible_host }}"

          clients:
            - name: client1
              o: admin
              cn: admin
            - name: client2
              not_before: "+3d"
            - name: client3

        - name: Company-root-ca
          root_dir: "{{ playbook_dir }}/pkis"
          ca:
            name: root
            cn: ROOT_CA
            o: example.com
            privatekey_size: 4096
            privatekey_passphrase: SECRET_PASS
          servers:
            - name: website
              cn: example.com
              privatekey_size: 4096
              privatekey_passphrase: SERVER_SECRET_PASS
              privatekey_cipher: aes256
              alt_names:
                domains: 
                  - example.com
                ips:
                  - "{{ ansible_host }}"